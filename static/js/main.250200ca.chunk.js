(this["webpackJsonpcrud-react"]=this["webpackJsonpcrud-react"]||[]).push([[0],{35:function(e,t,c){},37:function(e,t,c){},56:function(e,t,c){},62:function(e,t,c){},63:function(e,t,c){},64:function(e,t,c){"use strict";c.r(t);var a=c(28),n=c.n(a),i=c(30),s=c(2),r=(c(35),c(0));function l(){return Object(r.jsx)("footer",{children:Object(r.jsx)("span",{children:" N\xe3o tenho ideia do que colocar aqui! "})})}c(37);function j(){return Object(r.jsx)("header",{children:Object(r.jsx)("div",{className:"logoContainer",children:Object(r.jsx)("strong",{children:"Crud em React JS "})})})}var u=c(9),o=c(1),d=c(12),b=c(13),h=c(8),O=c.n(h),m="https://crud-reactbackend.herokuapp.com/artistas",x=new(function(){function e(){Object(d.a)(this,e)}return Object(b.a)(e,[{key:"retrieveArtistas",value:function(){return O.a.get(m)}},{key:"retrieveAlbumsByArtista",value:function(e){return O.a.get("".concat(m,"/").concat(e,"/albums"))}}]),e}()),f="https://crud-reactbackend.herokuapp.com/musicas",v=new(function(){function e(){Object(d.a)(this,e)}return Object(b.a)(e,[{key:"createMusica",value:function(e){return O.a.post(f,e)}},{key:"retrieveMusicaById",value:function(e){return O.a.get("".concat(f,"/").concat(e))}},{key:"retriveMusicas",value:function(){return O.a.get(f)}},{key:"deleteMusica",value:function(e){return O.a.delete("".concat(f,"/").concat(e))}}]),e}());c(56);function p(e){var t=e.match.params.id,c=Object(s.f)(),a=Object(o.useState)(""),n=Object(u.a)(a,2),i=n[0],l=n[1],j=Object(o.useState)(),d=Object(u.a)(j,2),b=d[0],h=d[1],O=Object(o.useState)(),m=Object(u.a)(O,2),f=m[0],p=m[1],N=Object(o.useState)([]),g=Object(u.a)(N,2),k=g[0],A=g[1],C=Object(o.useState)([]),y=Object(u.a)(C,2),M=y[0],B=y[1];function I(e){x.retrieveAlbumsByArtista(e).then((function(e){B(e.data),p(e.data[0].id)}))}return Object(o.useEffect)((function(){t?v.retrieveMusicaById(t).then((function(e){l(e.data.nome),p(e.data.album.id),h(e.data.artista.id),I(e.data.artista.id),x.retrieveArtistas().then((function(e){A(e.data)}))})):x.retrieveArtistas().then((function(e){A(e.data),h(e.data[0].id),I(e.data[0].id)}))}),[t]),Object(o.useEffect)((function(){b&&I(b)}),[b]),Object(r.jsx)("div",{className:"container",children:Object(r.jsx)("div",{className:"box",children:Object(r.jsxs)("div",{className:"formCad",children:[Object(r.jsx)("h2",{children:"Cadastro"}),Object(r.jsx)("label",{children:" M\xfasica "}),Object(r.jsx)("input",{placeholder:"Nome da m\xfasica",name:"nomeMusica",value:i,onChange:function(e){return l(e.target.value)}}),Object(r.jsx)("br",{}),Object(r.jsx)("label",{children:" Artista "}),Object(r.jsx)("select",{name:"cmbArtista",value:b,onChange:function(e){return h(Number(e.target.value))},children:k.map((function(e){return Object(r.jsx)("option",{value:e.id,children:e.nome},e.id)}))}),Object(r.jsx)("br",{}),Object(r.jsx)("label",{children:" Album "}),Object(r.jsx)("select",{name:"cmbAlbum",value:f,onChange:function(e){return p(Number(e.target.value))},children:M.map((function(e){return Object(r.jsx)("option",{value:e.id,children:e.titulo},e.id)}))}),Object(r.jsx)("br",{}),Object(r.jsxs)("div",{className:"formButtons",children:[Object(r.jsx)("button",{onClick:function(){var e={id:t,nome:i,album:M.find((function(e){return e.id===f})),artista:k.find((function(e){return e.id===b}))};v.createMusica(e).then((function(e){200===e.status?c.goBack():alert("Falha ao salvar!")}))},children:" Salvar "}),Object(r.jsx)("button",{onClick:function(){c.push("/musicas")},children:" Cancelar "})]})]})})})}var N=c(14);c(62);function g(){var e=Object(s.f)(),t=Object(o.useState)([]),c=Object(u.a)(t,2),a=c[0],n=c[1];return Object(o.useEffect)((function(){0===a.length&&v.retriveMusicas().then((function(e){n(e.data)}))})),a.sort((function(e,t){return e.artista.nome===t.artista.nome?0:e.artista.nome>t.artista.nome?1:-1})),Object(r.jsxs)("div",{className:"containerTable",children:[Object(r.jsx)("div",{className:"tableTitle",children:Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("div",{className:"title",children:" M\xfasicas "}),Object(r.jsxs)("button",{onClick:function(){e.push("/musicas/create")},children:[Object(r.jsx)(N.b,{type:"button",className:"iconButton"}),"Adicionar M\xfasica"]})]})}),Object(r.jsxs)("table",{children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"#"}),Object(r.jsx)("th",{children:"M\xfasica"}),Object(r.jsx)("th",{children:"Album"}),Object(r.jsx)("th",{children:"Artista"}),Object(r.jsx)("th",{children:"A\xe7\xf5es"})]})}),Object(r.jsx)("tbody",{children:a.map((function(t){return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:a.indexOf(t)+1}),Object(r.jsx)("td",{children:t.nome}),Object(r.jsx)("td",{children:t.album.titulo}),Object(r.jsx)("td",{children:t.artista.nome}),Object(r.jsxs)("td",{children:[Object(r.jsx)(N.a,{color:"green",title:"Editar",className:"iconButton",onClick:function(){return c=t.id,void e.push("/musicas/edit/".concat(c));var c}}),Object(r.jsx)(N.c,{color:"red",title:"Excluir",className:"iconButton",onClick:function(){return e=t.id,void v.deleteMusica(e).then((function(){n(a.filter((function(t){return t.id!==e})))})).catch((function(e){alert("N\xe3o foi poss\xedvel remover esta m\xfasica!"),console.log(e)}));var e}})]})]},t.id)}))})]}),Object(r.jsxs)("div",{className:"tableBottom",children:[Object(r.jsx)("div",{className:"hintText",children:"5 de 25 resultados"}),Object(r.jsxs)("ul",{className:"pagination",children:[Object(r.jsx)("li",{className:"pageItem",children:Object(r.jsx)("a",{className:"pageLink",href:"##",children:" Anterior"})}),Object(r.jsx)("li",{className:"pageItem active",children:Object(r.jsx)("a",{href:"##",className:"pageLink",children:"1"})}),Object(r.jsx)("li",{className:"pageItem",children:Object(r.jsx)("a",{href:"##",className:"pageLink",children:"2"})}),Object(r.jsx)("li",{className:"pageItem",children:Object(r.jsx)("a",{href:"##",className:"pageLink",children:"3"})}),Object(r.jsx)("li",{className:"pageItem",children:Object(r.jsx)("a",{href:"##",className:"pageLink",children:"4"})}),Object(r.jsx)("li",{className:"pageItem",children:Object(r.jsx)("a",{href:"##",className:"pageLink",children:"5"})}),Object(r.jsx)("li",{className:"pageItem",children:Object(r.jsx)("a",{href:"##",className:"pageLink",children:"Pr\xf3ximo"})})]})]})]})}c(63);var k=function(){return Object(r.jsxs)("div",{className:"pageContainer",children:[Object(r.jsx)(j,{}),Object(r.jsx)("div",{className:"contentWrap",children:Object(r.jsx)(i.a,{basename:"/crud-react-frontend",children:Object(r.jsxs)(s.c,{children:[Object(r.jsx)(s.a,{exact:!0,path:["/","/musicas"],component:g}),Object(r.jsx)(s.a,{path:"/musicas/create",component:p}),Object(r.jsx)(s.a,{path:"/musicas/edit/:id",component:p})]})})}),Object(r.jsx)(l,{})]})};n.a.render(Object(r.jsx)(k,{}),document.getElementById("app"))}},[[64,1,2]]]);
//# sourceMappingURL=main.250200ca.chunk.js.map